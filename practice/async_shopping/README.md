Kafka:


Outbox:


Order:

- enums/OrderStatus - статус заказа
- entity/Order  - описание таблицы заказов в базе данных
- factory/OrdersFactory - фабрика для создания новых заказов
- repository/OrderRepository - интерфейс для работы с базой данных (таблицей ордеров)
- service/OrderService - создание заказов и взаимодействие с ними
- controller/OrderController - управление заказами через webApi (обращаение к OrderService)
- 

Utility:


Процесс создания заказов:
1) В функции createOrder (из service/OrderService) внутри одной транзакции производятся операции создания заказа в базе данных "orders". В таблице заказов появляется создаётся новый заказ и управление передаётся на OutboxTaskService.

2) Функция createOutboxTask создаёт в таблице запросов запись с параметрами операции на списание средств.

2) С периодичностью 5 секунд планировщиком выполняется функция sendNewTasks (из OutboxTaskScheduler), которая ищет все необработанные запросы на списание средств и отправляет их кафке (+ дополнительно помечает, что данный запрос уже был обработан, чтобы повторно его не взять в следующий раз)

3) Сообщения отправляются кафке через компонент KafkaProducer под специальным топиком, который был задан в таблице запросов на списание под именем из TaskType)

